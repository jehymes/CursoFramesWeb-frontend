"use strict";angular,angular.module("primeiraApp",["ui.router","ngAnimate","toastr"]);
"use strict";!function(){function n(o,t,n){var r=this;r.loginMode=!0,r.changeMode=function(){return r.loginMode=!r.loginMode},r.login=function(){n.login(r.user,function(n){return n?t.addError(n):o.path("/")})},r.signup=function(){n.signup(r.user,function(n){return n?t.addError(n):o.path("/")})},r.getUser=function(){return n.getUser()},r.logout=function(){n.logout(function(){return o.path("/")})}}angular.module("primeiraApp").controller("AuthController",n),n.$inject=["$location","MsgsFactory","AuthFactory"]}(angular);
"use strict";!function(){function e(i,l,t,n){var c=this;function a(){var e=parseInt(n.search().page)||1;i.read(e).then(function(e){c.billingCycle={credits:[{}],debts:[{}]},c.billingCycles=e.data,o(),i.count().then(function(e){c.pages=Math.ceil(e.data.value/5),t.show(c,{tabList:!0,tabCreate:!0})})})}function s(t,e){200===t.status||201===t.status||204===t.status?(l.addSuccess("Operação realizada com sucesso!"),a()):500===t.status||400===t.status?Object.keys(t.data.errors).forEach(function(e){l.addError(t.data.errors[e].message)}):l.addError("Ops! Parece que encontramos um problema..."),e&&"function"==typeof e&&e()}function o(){c.credit=0,c.debt=0,c.billingCycle&&c.billingCycle.credits.forEach(function(e){var t=e.value;c.credit+=!t||isNaN(t)?0:parseFloat(t)}),c.billingCycle&&c.billingCycle.debts.forEach(function(e){var t=e.value;c.debt+=!t||isNaN(t)?0:parseFloat(t)}),c.total=c.credit-c.debt}c.statusDebts=["PAGO","PENDENTE","AGENDADO"],c.billingCycles={},c.billingCycle={},c.credit=0,c.debt=0,c.total=0,c.pages,c.initController=function(){a()},c.insert=function(){i.create(c.billingCycle).then(function(e){s(e)})},c.cloneBilling=function(e){var t={name:e.name,month:e.month,year:e.year,credits:e.credits,debts:e.debts};i.create(t).then(function(e){s(e)})},c.refresh=a,c.update=function(){i.update(c.billingCycle).then(function(e){s(e)})},c.deleteRegister=function(){i.delete(c.billingCycle).then(function(e){s(e)})},c.showTabUpdate=function(e){c.billingCycle=e,t.show(c,{tabUpdate:!0})},c.showTabDelete=function(e){c.billingCycle=e,t.show(c,{tabDelete:!0})},c.addCredito=function(e){c.billingCycle.credits.splice(e+1,0,{})},c.copyCredito=function(e,t){var i=t.name,l=t.value;c.billingCycle.credits.splice(e+1,0,{name:i,value:l}),o()},c.removeCredito=function(e){1<c.billingCycle.credits.length?c.billingCycle.credits.splice(e,1):1===c.billingCycle.credits.length&&(c.billingCycle.credits=[{}]);o()},c.addDebito=function(e){c.billingCycle.debts.splice(e+1,0,{})},c.copyDebito=function(e,t){var i=t.name,l=t.value,n=t.status;c.billingCycle.debts.splice(e+1,0,{name:i,value:l,status:n}),o()},c.removeDebito=function(e){1<c.billingCycle.debts.length?c.billingCycle.debts.splice(e,1):1===c.billingCycle.debts.length&&(c.billingCycle.debts=[{}]);o()},c.calculateValues=o}angular.module("primeiraApp").controller("BillingCyclesController",e),e.$inject=["BillingCyclesService","MsgsFactory","TabsFactory","$location"]}(angular);
"use strict";!function(){function n(t,n){var e=this,i=n.apiUrl;e.create=function(n){return t.post(i+"/billingCycles",n).then(function(n){return n}).catch(function(n){return n})},e.read=function(n){return t.get(i+"/billingCycles?skip="+5*(n-1)+"&limit=5").then(function(n){return n}).catch(function(n){return n})},e.update=function(n){return t.put(i+"/billingCycles/"+n._id,n).then(function(n){return n}).catch(function(n){return n})},e.delete=function(n){return t.delete(i+"/billingCycles/"+n._id,n).then(function(n){return n}).catch(function(n){return n})},e.count=function(){return t.get(i+"/billingCycles/count").then(function(n){return n}).catch(function(n){return n})}}angular.module("primeiraApp").service("BillingCyclesService",n),n.$inject=["$http","consts"]}();
"use strict";angular.module("primeiraApp").constant("consts",{appName:"MEAN - Primeira Aplicação",version:"1.0",owner:"JG Desenvolvimentos",year:"2021",site:"https://jgdesenvolvimentos.com.br",apiUrl:"https://admin-money-backend.herokuapp.com/api",oapiUrl:"https://admin-money-backend.herokuapp.com/oapi",userKey:"_primeira_app_user"}).run(["$rootScope","consts",function(e,o){e.consts=o}]);
"use strict";angular,angular.module("primeiraApp").config(["$stateProvider","$httpProvider",function(t,a){t.state("dashboard",{url:"/dashboard",templateUrl:"dashboard/dashboard.html"}).state("billingCycles",{url:"/billingCycles?page",templateUrl:"billingCycles/tabs.html"}),a.interceptors.push("handleResponseError")}]).run(["$rootScope","$http","$location","$window","AuthFactory",function(t,n,i,l,a){function o(){var o=a.getUser(),e="/auth.html",r=l.location.href.endsWith(e);o||r?o&&!o.isValid&&a.validateToken(o.token,function(t,a){a?(o.isValid=!0,n.defaults.headers.common.Authorization=o.token,r?l.location.href="/":i.path("/dashboard")):l.location.href=e}):l.location.href=e}o(),t.$on("$locationChangeStart",function(){return o()})}]);
"use strict";!function(){function t(t){var a=this;a.credit="",a.debt="",a.total="",a.getSummary=function(){t.getSummary().then(function(t){var r=t.credit,e=void 0===r?0:r,i=t.debt,o=void 0===i?0:i;a.credit=e,a.debt=o,a.total=e-o})}}angular.module("primeiraApp").controller("DashboardController",t),t.$inject=["DashboardService"]}();
"use strict";!function(){function t(t,n){var r=n.apiUrl;this.getSummary=function(){return t.get(r+"/billingSummary").then(function(t){return t.data})}}angular.module("primeiraApp").service("DashboardService",t),t.$inject=["$http","consts"]}();
"use strict";angular.module("primeiraApp").component("authField",{bindings:{id:"@",label:"@",type:"@",grid:"@",icon:"@",model:"=",placeholder:"@",hide:"<"},controller:function(){var l=this;this.$onInit=function(){l.iconClasses="glyphicon glyphicon-"+l.icon+" form-controlfeedback"}},template:'\n    <div class="form-group has-feedback">\n    <input ng-model="$ctrl.model" id="{{ $ctrl.id }}" class="form-control"\n    type="{{ $ctrl.type }}" placeholder="{{ $ctrl.placeholder }}"\n    ng-hide="$ctrl.hide" />\n    <span class="{{ $ctrl.iconClasses }}"></span>\n    </div>\n    '});
"use strict";angular,angular.module("primeiraApp").component("contentHeader",{bindings:{name:"@",small:"@"},template:'\n    <section class="content-header">\n        <h1>{{ $ctrl.name }} <small>{{ $ctrl.small }}</small></h1>\n    </section>\n    '});
"use strict";angular,angular.module("primeiraApp").component("fields",{bindings:{id:"@",grid:"@",label:"@",placeholder:"@",type:"@",model:"=",readonly:"<"},controller:["gridSystem",function(l){var n=this;this.$onInit=function(){return n.gridClasses=l.toCssClasses(n.grid)}}],template:'\n        <div class="{{ $ctrl.gridClasses }}">\n            <div class="form-group">\n            <label for="{{ $ctrl.id }}">{{ $ctrl.label }}</label>\n            <input \n              ng-model="$ctrl.model" \n              id="{{ $ctrl.id }}" \n              class="form-control" \n              placeholder="{{ $ctrl.placeholder }}" \n              type="{{ $ctrl.type }}"\n              ng-readonly="$ctrl.readonly"\n              />\n            </div>\n        </div>\n        '});
"use strict";angular,angular.module("primeiraApp").component("paginator",{bindings:{url:"@",pages:"@"},controller:["$location",function(r){this.$onChanges=function(){var n=parseInt(this.pages)||1;this.pagesArray=Array(n).fill(0).map(function(n,r){return r+1}),this.current=parseInt(r.search().page)||1,this.needPagination=1<this.pages,this.hasPrev=1<this.current,this.hasNext=this.current<this.pages,this.isCurrent=function(n){return this.current==n}}}],template:'\n    <ul ng-if="$ctrl.needPagination" class="pagination pagination-sm no-margin pull-right">\n      <li ng-if="$ctrl.hasPrev">\n        <a href="{{ $ctrl.url  }}?page={{ $ctrl.current - 1 }}">Anterior</a>\n      </li>\n      <li ng-class="{active: $ctrl.isCurrent(index)}" ng-repeat="index in $ctrl.pagesArray">\n        <a href="{{ $ctrl.url }}?page={{ index }}">{{ index }}</a>\n      </li>\n      <li ng-if="$ctrl.hasNext">\n        <a href="{{ $ctrl.url }}?page={{ $ctrl.current + 1 }}">Próximo</a>\n      </li>\n    </ul>\n    '});
"use strict";angular,angular.module("primeiraApp").component("valueBox",{bindings:{grid:"@",colorClass:"@",value:"@",text:"@",iconClass:"@"},controller:["gridSystem",function(s){var n=this;this.$onInit=function(){return n.gridClasses=s.toCssClasses(n.grid)}}],template:'\n    <div class="{{ $ctrl.gridClasses }}">\n        <div class="small-box {{ $ctrl.colorClass }}">\n            <div class="inner" style="padding: 20px !important">\n                <b><h4>{{ $ctrl.value }}</h4></b>\n                <p>{{ $ctrl.text }}</p>\n            </div>\n            <div class="icon">\n                <i class="fa {{ $ctrl.iconClass }}"></i>\n            </div>\n        </div>\n    </div>\n    '});
"use strict";!function(){function t(a,t,e){var n=null;function o(){return n||(n=JSON.parse(localStorage.getItem(e.userKey))),n}function r(t,n,o){a.post(e.oapiUrl+"/"+t,n).then(function(t){localStorage.setItem(e.userKey,JSON.stringify(t.data)),a.defaults.headers.common.Authorization=t.data.token,o&&o(null,t.data)}).catch(function(t){o&&o(t.data.errors,t.data)})}function i(t){n=null,localStorage.removeItem(e.userKey),a.defaults.headers.common.Authorization="",t&&t(null)}return{signup:function(t,n){r("signup",t,n)},login:function(t,n){r("login",t,n)},logout:i,validateToken:function(t,n){t?a.post(e.oapiUrl+"/validateToken",{token:t}).then(function(t){t.data.valid?a.defaults.headers.common.Authorization=o().token:i(),n&&n(null,t.data.valid)}).catch(function(t){n&&n(t.data.errors)}):n&&n("Token inválido.")},getUser:o}}angular.module("primeiraApp").factory("AuthFactory",t),t.$inject=["$http","$rootScope","consts"]}(angular);
"use strict";angular,angular.module("primeiraApp").factory("gridSystem",[function(){return{toCssClasses:function(r){var s=r?r.split(" "):[],l="";return s[0]&&(l+="col-xs-"+s[0]),s[1]&&(l+=" col-sm-"+s[1]),s[2]&&(l+=" col-md-"+s[2]),s[3]&&(l+=" col-lg-"+s[3]),l}}}]);
"use strict";function HandleResponseErrorFactory(e,o,n){return{responseError:function(r){return 403===r.status&&(localStorage.removeItem(n.userKey),o.location.href="/"),e.reject(r)}}}angular.module("primeiraApp").factory("handleResponseError",["$q","$window","consts",HandleResponseErrorFactory]);
"use strict";!function(){function r(o){function n(r,n,c){r instanceof Array?r.forEach(function(r){return o[c](r,n)}):o[c](r,n)}return{addSuccess:function(r){n(r,"Sucesso","success")},addError:function(r){n(r,"Erro","error")}}}angular.module("primeiraApp").factory("MsgsFactory",r),r.$inject=["toastr"]}(angular);
"use strict";!function(){function t(){return{show:function(t,a){var e=a.tabList,i=void 0!==e&&e,r=a.tabCreate,o=void 0!==r&&r,n=a.tabUpdate,b=void 0!==n&&n,u=a.tabDelete,c=void 0!==u&&u;t.tabList=i,t.tabCreate=o,t.tabUpdate=b,t.tabDelete=c}}}angular.module("primeiraApp").factory("TabsFactory",t),t.$inject=[]}(angular);